<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JLXTrades — Compare Prop Firms</title>
    <meta name="description"
        content="Compare futures prop firm challenges by drawdown method, account size, steps, price and more." />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="cubefx.css" />
</head>

<body class="compare-page">
    <div id="cube-bg" aria-hidden="true"></div>
    <header>
        <div class="container nav">
            <a class="brand" href="index.html">
                <span class="brand-logo" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="img" aria-label="Logo">
                        <path d="M12 2l3.5 6.8 7.5 1.1-5.5 5.2 1.3 7.4L12 18.6 5.2 22.5 6.5 15 1 9.9l7.5-1.1L12 2z" />
                    </svg>
                </span>
                <span>JLXTrades</span>
            </a>
            <nav class="nav-links">
                <a href="index.html#features">Features</a>
                <a href="index.html#deals">Deals</a>
                <a href="compare.html">Compare</a>
                <a href="contact.html">Contact</a>
                <a href="index.html#faq">FAQ</a>
            </nav>
            <div class="nav-actions" style="display:flex; gap:10px; align-items:center;">
                <button id="themeToggle" class="toggle" aria-label="Toggle theme" title="Toggle light/dark">
                    <svg id="sunIcon" viewBox="0 0 24 24">
                        <path
                            d="M6.76 4.84l-1.8-1.79L3.17 4.84l1.79 1.79 1.8-1.79zM1 13h3v-2H1v2zm10 10h2v-3h-2v3zm9.83-19.16l-1.79-1.79-1.8 1.79 1.8 1.79 1.79-1.79zM20 11v2h3v-2h-3zM6.76 19.16l-1.8 1.79 1.41 1.41 1.79-1.79-1.4-1.41zM17.24 4.84l1.8-1.79-1.41-1.41-1.79 1.79 1.4 1.41zM12 6a6 6 0 100 12 6 6 0 000-12z" />
                    </svg>
                    <span id="toggleLabel">Light</span>
                </button>
                <a class="cta-btn" href="index.html#deals">Use Code: JLXTRADES</a>
                <a href="stones.html" class="diamond-btn" title="Stones" aria-label="Stones">
                    <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                        <path d="M12 2l4 4h5l-9 16L3 6h5l4-4zM7 6l5 12L17 6h-4l-1-1-1 1H7z" />
                    </svg>
                </a>

            </div>
        </div>
    </header>

    <main>
        <section class="container" style="padding-top:28px;">
            <h1 class="section-title" style="margin-bottom:4px;">Futures Prop Firm Challenges</h1>
            <p class="section-subtitle">Filter and sort to find the right account quickly.</p>

            <!-- Filters -->
            <div class="card" style="margin:16px 0;" data-move>
                <div class="compare-filters">
                    <div class="filter-group">
                        <label>Drawdown Method</label>
                        <select id="fDrawdown">
                            <option>All</option>
                            <option>EOD</option>
                            <option>Intraday Trailing</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Account Size</label>
                        <select id="fAccount">
                            <option>All</option>
                            <option>25K</option>
                            <option>50K</option>
                            <option>100K</option>
                            <option>150K</option>
                            <option>200K</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Steps</label>
                        <select id="fSteps">
                            <option>All</option>
                            <option>1 Step</option>
                            <option>2 Step</option>
                            <option>3 Step</option>
                            <option>Instant Funded</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Price</label>
                        <select id="fPriceType">
                            <option>All</option>
                            <option>Monthly</option>
                            <option>One-Time</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Table -->
            <div class="card" data-move>
                <div class="compare-table-wrap">
                    <table class="compare-table" id="compareTable">
                        <thead>
                            <tr>
                                <th data-sort="name">PropFirm Name</th>
                                <th data-sort="accountSize">Account Size</th>
                                <th data-sort="steps">Steps</th>
                                <th data-sort="activationFee">Activation Fee</th>
                                <th data-sort="maxContracts">Max Contract Size<br><small>(Mini | Micros)</small></th>
                                <th data-sort="profitTarget">Profit Target</th>
                                <th data-sort="dailyLoss">Daily Loss</th>
                                <th data-sort="maxLoss">Max Loss</th>
                                <th data-sort="profitSplit">Profit Split</th>
                                <th data-sort="payoutFreq">Payout Frequency</th>
                                <th data-sort="priceAmount">Price</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="compareBody">
                            <!-- rows injected by compare.js -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container"
            style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:center;">
            <div style="display:flex; align-items:center; gap:10px;">
                <div class="brand-logo" aria-hidden="true" style="width:28px;height:28px;border-radius:10px;"><svg
                        viewBox="0 0 24 24">
                        <path fill="#fff"
                            d="M12 2l3.5 6.8 7.5 1.1-5.5 5.2 1.3 7.4L12 18.6 5.2 22.5 6.5 15 1 9.9l7.5-1.1L12 2z" />
                    </svg></div>
                <strong>JLXTrades</strong>
            </div>
            <div>© <span id="year"></span> JLXTrades. Perks for futures traders.</div>
        </div>
    </footer>

    <script src="app.js"></script>
    <script src="compare.js"></script>
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="cubefx.js"></script>
    <!-- Include only if this page doesn't already include supabase-js -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        (function () {
            // ===== CONFIG — YOUR Supabase project =====
            const SUPABASE_URL = 'https://mbhgjdxiprlxbrzifnwz.supabase.co';
            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iaGdqZHhpcHJseGJyemlmbnd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NzA5NDEsImV4cCI6MjA3NDQ0Njk0MX0.dgqHTewgFTYG8XHgmc8gk4IhdrYrf4Z8PVWeVlOA6gg';

            // Require SDK
            if (!window.supabase) { console.error('Supabase SDK not loaded. Add the CDN <script> above this block.'); return; }

            // Reuse a single client per page load
            const sb = window.__sbClient || (window.__sbClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY));

            const badge = document.getElementById('navStoneBadge');
            if (!badge) return; // no diamond on this page

            async function refreshBadge() {
                try {
                    const { data: { user }, error: uErr } = await sb.auth.getUser();
                    if (uErr) { console.warn('[StonesBadge] getUser:', uErr.message); badge.hidden = true; return; }
                    if (!user) { badge.hidden = true; return; }

                    const { data, error } = await sb
                        .from('users')
                        .select('stones')
                        .eq('email', user.email)
                        .single();

                    if (error && error.code !== 'PGRST116') {
                        console.warn('[StonesBadge] select users:', error.message);
                        badge.hidden = true; return;
                    }

                    const stones = data?.stones ?? 0;
                    badge.textContent = stones;
                    badge.hidden = stones <= 0;
                } catch (e) {
                    console.warn('[StonesBadge] error:', e);
                    badge.hidden = true;
                }
            }

            // Initial paint
            refreshBadge();

            // Update when auth state changes (login/logout)
            sb.auth.onAuthStateChange(() => refreshBadge());

            // Refresh when the tab regains focus
            window.addEventListener('focus', refreshBadge);

            // (Optional) periodic refresh every few minutes
            // setInterval(refreshBadge, 180000);
        })();
    </script>

</body>

</html>
